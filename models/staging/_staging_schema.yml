version: 2

models:
  - name: stg_customers
    description: >
      This staging table (`stg_customers`) provides a cleaned and standardized view
      of raw customer data. It includes essential customer attributes and is a foundational
      model for downstream analysis.
    columns:
      - name: customer_id
        description: >
          The unique identifier for each customer. This serves as the primary key for
          this staging table.
        tests:
          - unique
          - not_null
      - name: first_name
        description: >
          The first name of the customer. This column is cleaned and standardized
          during the staging process.
        tests:
          - not_null
      - name: last_name
        description: >
          The last name of the customer. This column is cleaned and standardized
          during the staging process.
        tests:
          - not_null

  - name: stg_orders
    description: >
      This staging table (`stg_orders`) provides a cleaned and standardized view
      of raw order data. It includes key order details and links to customers,
      employees, and stores.
    columns:
      - name: order_id
        description: >
          The unique identifier for each order. This serves as the primary key for
          this staging table.
        tests:
          - unique
          - not_null
      - name: customer_id
        description: >
          The foreign key linking to the `stg_customers` table, representing the customer
          who placed the order.
        tests:
          - not_null
          - relationships:
              to: ref('stg_customers')
              field: customer_id
      - name: order_date
        description: >
          The date on which the order was placed. This column is crucial for time-series
          analysis.
        tests:
          - not_null
      - name: status_cd
        description: >
          The current status code of the order (e.g., 'processing', 'cancelled', 'completed').
          This column is validated against a predefined set of values.
        tests:
          - accepted_values:
              values: ['processing', 'cancelled', 'completed']

  - name: stg_products
    description: >
      This staging table (`stg_products`) provides a cleaned and standardized view
      of raw product data. It includes essential product attributes.
    columns:
      - name: product_id
        description: >
          The unique identifier for each product. This serves as the primary key for
          this staging table.
        tests:
          - unique
          - not_null
      - name: product_name
        description: >
          The name of the product. This column is cleaned and standardized during
          the staging process.
        tests:
          - not_null

  - name: stg_order_items
    description: >
      This staging table (`stg_order_items`) provides a cleaned and standardized view
      of raw order item data. It details individual products within each order.
    columns:
      - name: order_item_id
        description: >
          The unique identifier for each order item. This serves as the primary key for
          this staging table.
        tests:
          - unique
          - not_null
      - name: order_id
        description: >
          The foreign key linking to the `stg_orders` table, representing the order
          to which this item belongs.
        tests:
          - not_null
          - relationships:
              to: ref('stg_orders')
              field: order_id
      - name: product_id
        description: >
          The foreign key linking to the `stg_products` table, representing the product
          associated with this order item.
        tests:
          - not_null
          - relationships:
              to: ref('stg_products')
              field: product_id
      - name: quantity
        description: >
          The quantity of the product included in this specific order item. This is
          a crucial metric for calculating order revenue and product popularity.
        tests:
          - not_null
          - dbt_utils.at_least_one

  - name: stg_employees
    description: >
      This staging table (`stg_employees`) provides a cleaned and standardized view
      of raw employee data. It includes essential employee attributes.
    columns:
      - name: employee_id
        description: >
          The unique identifier for each employee. This serves as the primary key for
          this staging table.
        tests:
          - unique
          - not_null
      - name: first_name
        description: >
          The first name of the employee. This column is cleaned and standardized
          during the staging process.
        tests:
          - not_null
      - name: last_name
        description: >
          The last name of the employee. This column is cleaned and standardized
          during the staging process.
        tests:
          - not_null

  - name: stg_stores
    description: >
      This staging table (`stg_stores`) provides a cleaned and standardized view
      of raw store data. It includes essential store attributes.
    columns:
      - name: store_id
        description: >
          The unique identifier for each store. This serves as the primary key for
          this staging table.
        tests:
          - unique
          - not_null
      - name: store_name
        description: >
          The name of the store. This column is cleaned and standardized during
          the staging process.
        tests:
          - not_null

  - name: stg_suppliers
    description: >
      This staging table (`stg_suppliers`) provides a cleaned and standardized view
      of raw supplier data. It includes essential supplier attributes.
    columns:
      - name: supplier_id
        description: >
          The unique identifier for each supplier. This serves as the primary key for
          this staging table.
        tests:
          - unique
          - not_null
      - name: supplier_name
        description: >
          The name of the supplier. This column is cleaned and standardized during
          the staging process.
        tests:
          - not_null

  - name: stg_dates
    description: >
      This staging table (`stg_dates`) provides a cleaned and standardized view
      of raw date data. It includes various date attributes for time-based analysis.
    columns:
      - name: date_id
        description: >
          The unique identifier for each date. This serves as the primary key for
          this staging table.
        tests:
          - unique
          - not_null
      - name: day_of_week
        description: >
          The day of the week (e.g., Monday, Tuesday) for the given date.
        tests:
          - not_null
      - name: month
        description: >
          The month of the year (e.g., 1 for January, 12 for December) for the given date.
        tests:
          - not_null
      - name: year
        description: >
          The year for the given date.
        tests:
          - not_null