version: 2

models:
  - name: customer_revenue
    description: >
      This aggregated model (`customer_revenue`) calculates the total revenue generated
      by each customer. It provides a high-level view of customer value and is used
      for customer segmentation and marketing analysis.
    columns:
      - name: customer_id
        description: >
          The unique identifier for each customer, serving as the primary key for this
          aggregated table.
        tests:
          - unique
          - not_null
      - name: total_revenue
        description: >
          The sum of all revenue generated by a specific customer across all their orders.
          This metric helps identify high-value customers.
        tests:
          - not_null
          - dbt_utils.at_least_one

  - name: fct_customer_segmentation
    description: >
      This fact table (`fct_customer_segmentation`) assigns customers to specific segments
      (e.g., 'Regular', 'New') based on predefined criteria. This model is used for
      targeted marketing campaigns and personalized customer experiences.
    columns:
      - name: customer_id
        description: >
          The unique identifier for each customer, serving as the primary key for this
          segmentation table.
        tests:
          - unique
          - not_null
      - name: segment_name
        description: >
          The assigned segment name for the customer. Possible values include 'Regular'
          and 'New', indicating different customer behaviors or lifecycle stages.
        tests:
          - accepted_values:
              values: ['Regular', 'New']

  - name: fct_store_performance
    description: >
      This fact table (`fct_store_performance`) provides key performance indicators
      for each store, focusing on revenue. It helps in evaluating the performance
      of individual retail locations.
    columns:
      - name: store_name
        description: >
          The name of the store, serving as a unique identifier for each retail location.
          This is the primary key for this performance table.
        tests:
          - unique
          - not_null
      - name: actual_revenue
        description: >
          The actual total revenue generated by the store. This metric is crucial for
          assessing store profitability and identifying top-performing locations.
        tests:
          - not_null
          - dbt_utils.at_least_one